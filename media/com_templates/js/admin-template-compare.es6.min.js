document.addEventListener("DOMContentLoaded",()=>{const e=(e,t)=>{const a=t.nextElementSibling;let l="",n=null;const s=JsDiff.diffLines(e.innerHTML,t.innerHTML),o=document.createDocumentFragment();s.forEach(e=>{l=e.added?"#a6f3a6":e.removed?"#f8cbcb":"",(n=document.createElement("pre")).style.backgroundColor=l,n.className="diffview",n.appendChild(document.createTextNode((e=>{const t={"&amp;":"&","&#038;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#039;":"'","&#8217;":"’","&#8216;":"‘","&#8211;":"–","&#8212;":"—","&#8230;":"…","&#8221;":"”"};return e.replace(/\&[\w\d\#]{2,5}\;/g,e=>t[e])})(e.value))),o.appendChild(n)}),a.appendChild(o)},t=document.getElementById("override-pane"),a=document.getElementById("core-pane"),l=document.getElementById("diff-main"),n=[].slice.call(document.querySelectorAll("[onclick-task]")),s=document.getElementById("conditional-section");0!==n.length?(n.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),(e=>{const n=e.target.getAttribute("onclick-task");if("template.show.core"===n){if(a){const{display:l}=a.style;"none"===l?(e.target.className="btn btn-success",e.target.innerHTML=Joomla.JText._("COM_TEMPLATES_LAYOUTS_DIFFVIEW_HIDE_CORE"),a.style.display="block",t.className="col-md-6",Joomla.editors.instances.jform_core.refresh()):(e.target.className="btn btn-danger",e.target.innerHTML=Joomla.JText._("COM_TEMPLATES_LAYOUTS_DIFFVIEW_SHOW_CORE"),a.style.display="none",t.className="col-md-12");const n={class:e.target.className,title:e.target.innerHTML,display:a.style.display,overrideClass:t.className};"undefined"!=typeof Storage&&localStorage.setItem("coreButtonState",JSON.stringify(n))}}else if("template.show.diff"===n&&l){const{display:t}=l.style;"none"===t?(e.target.className="btn btn-success",e.target.innerHTML=Joomla.JText._("COM_TEMPLATES_LAYOUTS_DIFFVIEW_HIDE_DIFF"),l.style.display="block"):(e.target.className="btn btn-danger",e.target.innerHTML=Joomla.JText._("COM_TEMPLATES_LAYOUTS_DIFFVIEW_SHOW_DIFF"),l.style.display="none");const a={class:e.target.className,title:e.target.innerHTML,display:l.style.display};"undefined"!=typeof Storage&&localStorage.setItem("diffButtonState",JSON.stringify(a))}})(e)})}),(()=>{if("undefined"!=typeof Storage){const e=JSON.parse(localStorage.getItem("coreButtonState")),s=JSON.parse(localStorage.getItem("diffButtonState"));null!==e&&a&&t&&(n[0].className=e.class,n[0].innerHTML=e.title,a.style.display=e.display,t.className=e.overrideClass),null!==s&&l&&(n[1].className=s.class,n[1].innerHTML=s.title,l.style.display=s.display)}})()):t&&s&&(s.className="col-md-12",t.className="col-md-12");const o=[].slice.call(document.querySelectorAll("#original"));for(let t=0,a=o.length;t<a;t+=1)e(o[t],o[t].nextElementSibling)});