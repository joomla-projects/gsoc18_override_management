Joomla=window.Joomla||{},function(e){"use strict";document.addEventListener("DOMContentLoaded",function(){e.submitbuttonpackage=function(){var t=document.getElementById("adminForm");""==t.install_package.value?alert(e.JText._("PLG_INSTALLER_PACKAGEINSTALLER_NO_PACKAGE"),!0):(e.displayLoader(),t.installtype.value="upload",t.submit())},e.submitbuttonfolder=function(){var t=document.getElementById("adminForm");""==t.install_directory.value?alert(e.JText._("PLG_INSTALLER_FOLDERINSTALLER_NO_INSTALL_PATH"),!0):(e.displayLoader(),t.installtype.value="folder",t.submit())},e.submitbuttonurl=function(){var t=document.getElementById("adminForm");""==t.install_url.value||"http://"==t.install_url.value||"https://"==t.install_url.value?alert(e.JText._("PLG_INSTALLER_URLINSTALLER_NO_URL"),!0):(e.displayLoader(),t.installtype.value="url",t.submit())},e.submitbutton4=function(){var t=document.getElementById("adminForm");""==t.install_url.value||"http://"==t.install_url.value||"https://"==t.install_url.value?alert(e.JText._("COM_INSTALLER_MSG_INSTALL_ENTER_A_URL"),!0):(e.displayLoader(),t.installtype.value="url",t.submit())},e.submitbuttonUpload=function(){var t=document.getElementById("uploadForm");""==t.install_package.value?alert(e.JText._("COM_INSTALLER_MSG_INSTALL_PLEASE_SELECT_A_PACKAGE"),!0):(e.displayLoader(),t.submit())},e.displayLoader=function(){var e=document.getElementById("loading");e&&(e.style.display="block")};var t=document.getElementById("loading"),a=document.getElementById("installer-install");t&&a&&(t.style.top=parseInt(a.offsetTop-window.pageYOffset),t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.display="none",t.style.marginTop="-10px"),document.getElementById("installbutton_package").addEventListener("click",function(t){t.preventDefault(),e.submitbuttonpackage()})})}(Joomla),document.addEventListener("DOMContentLoaded",function(){if("undefined"==typeof FormData)return document.querySelector("#legacy-uploader").style.display="block",void(document.querySelector("#uploader-wrapper").style.display="none");var e=document.querySelector("#dragarea"),t=document.querySelector("#install_package"),a=document.querySelector("#loading"),n=document.querySelector("#select-file-button"),l=document.querySelector("#installer-return").value,o=(document.querySelector("#installer-token").value,"index.php?option=com_installer&task=install.ajax_upload");l&&(o+="&return="+l),n.addEventListener("click",function(){t.click()}),t.addEventListener("change",function(){Joomla.submitbuttonpackage()}),e.addEventListener("dragenter",function(t){return t.preventDefault(),t.stopPropagation(),e.classList.add("hover"),!1}),e.addEventListener("dragover",function(t){return t.preventDefault(),t.stopPropagation(),e.classList.add("hover"),!1}),e.addEventListener("dragleave",function(t){return t.preventDefault(),t.stopPropagation(),e.classList.remove("hover"),!1}),e.addEventListener("drop",function(t){t.preventDefault(),t.stopPropagation(),e.classList.remove("hover");var n=t.target.files||t.dataTransfer.files;if(n.length){var l=n[0],r=new FormData;r.append("install_package",l),r.append("installtype","upload"),r.append(i,1),a.style.display="block";var s=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");s.open("POST",o,!0);var i=Joomla.getOptions("csrf.token","");i&&s.setRequestHeader("X-CSRF-Token",i),s.onreadystatechange=function(){if(4===s.readyState)if(200===s.status){console.log(s.responseText);var e=JSON.parse(s.responseText);e.success||console.log(e.message,e.messages),e.data.redirect?location.href=e.data.redirect:location.href="index.php?option=com_installer&view=install"}else options.onError&&(a.style.display="none",alert(s.statusText))},s.send(r)}})});