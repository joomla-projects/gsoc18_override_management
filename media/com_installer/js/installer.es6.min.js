Joomla=window.Joomla||{},(e=>{"use strict";document.addEventListener("DOMContentLoaded",()=>{e.submitbuttonpackage=(()=>{const t=document.getElementById("adminForm");""==t.install_package.value?alert(e.JText._("PLG_INSTALLER_PACKAGEINSTALLER_NO_PACKAGE"),!0):(e.displayLoader(),t.installtype.value="upload",t.submit())}),e.submitbuttonfolder=(()=>{const t=document.getElementById("adminForm");""==t.install_directory.value?alert(e.JText._("PLG_INSTALLER_FOLDERINSTALLER_NO_INSTALL_PATH"),!0):(e.displayLoader(),t.installtype.value="folder",t.submit())}),e.submitbuttonurl=(()=>{const t=document.getElementById("adminForm");""==t.install_url.value||"http://"==t.install_url.value||"https://"==t.install_url.value?alert(e.JText._("PLG_INSTALLER_URLINSTALLER_NO_URL"),!0):(e.displayLoader(),t.installtype.value="url",t.submit())}),e.submitbutton4=(()=>{const t=document.getElementById("adminForm");""==t.install_url.value||"http://"==t.install_url.value||"https://"==t.install_url.value?alert(e.JText._("COM_INSTALLER_MSG_INSTALL_ENTER_A_URL"),!0):(e.displayLoader(),t.installtype.value="url",t.submit())}),e.submitbuttonUpload=(()=>{const t=document.getElementById("uploadForm");""==t.install_package.value?alert(e.JText._("COM_INSTALLER_MSG_INSTALL_PLEASE_SELECT_A_PACKAGE"),!0):(e.displayLoader(),t.submit())}),e.displayLoader=(()=>{const e=document.getElementById("loading");e&&(e.style.display="block")});let t=document.getElementById("loading"),a=document.getElementById("installer-install");t&&a&&(t.style.top=parseInt(a.offsetTop-window.pageYOffset),t.style.left=0,t.style.width="100%",t.style.height="100%",t.style.display="none",t.style.marginTop="-10px"),document.getElementById("installbutton_package").addEventListener("click",t=>{t.preventDefault(),e.submitbuttonpackage()})})})(Joomla),document.addEventListener("DOMContentLoaded",()=>{if("undefined"==typeof FormData)return document.querySelector("#legacy-uploader").style.display="block",void(document.querySelector("#uploader-wrapper").style.display="none");let e=document.querySelector("#dragarea"),t=document.querySelector("#install_package"),a=document.querySelector("#loading"),l=document.querySelector("#select-file-button"),n=document.querySelector("#installer-return").value,o=(document.querySelector("#installer-token").value,"index.php?option=com_installer&task=install.ajax_upload");n&&(o+=`&return=${n}`),l.addEventListener("click",()=>{t.click()}),t.addEventListener("change",()=>{Joomla.submitbuttonpackage()}),e.addEventListener("dragenter",t=>(t.preventDefault(),t.stopPropagation(),e.classList.add("hover"),!1)),e.addEventListener("dragover",t=>(t.preventDefault(),t.stopPropagation(),e.classList.add("hover"),!1)),e.addEventListener("dragleave",t=>(t.preventDefault(),t.stopPropagation(),e.classList.remove("hover"),!1)),e.addEventListener("drop",t=>{t.preventDefault(),t.stopPropagation(),e.classList.remove("hover");const l=t.target.files||t.dataTransfer.files;if(!l.length)return;const n=l[0],s=new FormData;s.append("install_package",n),s.append("installtype","upload"),s.append(d,1),a.style.display="block";const r=window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("MSXML2.XMLHTTP.3.0");r.open("POST",o,!0);const d=Joomla.getOptions("csrf.token","");d&&r.setRequestHeader("X-CSRF-Token",d),r.onreadystatechange=function(){if(4===r.readyState)if(200===r.status){const e=JSON.parse(r.responseText);e.success||console.log(e.message,e.messages),e.data.redirect?location.href=e.data.redirect:location.href="index.php?option=com_installer&view=install"}else options.onError&&(a.style.display="none",alert(r.statusText))},r.send(s)})});